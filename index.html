<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps Reviews</title>
    <style>
      .review-container {
        margin-bottom: 20px;
        margin: 5px;
        padding: 10px;
        border: 1px solid #ccc;
        background-color: #f9f9f9;
        width: calc(33.33% - 20px);
        float: left;
        box-sizing: border-box;
      }

      .review-author {
        display: flex;
        align-items: center;
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .review-author img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 10px;
      }

      .review-rating {
        color: #ffd700;
        margin-left: 5px;
      }

      .review-text {
        margin-top: 10px;
        font-size: 18px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        max-height: 3.6em;
        line-height: 1.2em;
      }

      .review-more {
        color: blue;
        cursor: pointer;
      }

      .review-expanded {
        white-space: normal;
        max-height: none;
      }

      @media only screen and (max-width: 768px) {
        .review-container {
          width: 100%;
        }
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqdzTQUv72GXLLpFGg8XSWhSXTqzUUepU&libraries=places"></script>
  </head>
  <body>
    <div id="reviews-container">
    <div id="map"></div>      
    </div>

    <script>
      function initMap() {
        var placeId = 'ChIJoRMxb8EFdkgReLJrP5stpuM';
        var map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: -33.866, lng: 151.196 },
          zoom: 15
        });
        var service = new google.maps.places.PlacesService(map);

        service.getDetails(
          { placeId: placeId },
          function (place, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              var reviews = place.reviews;

              if (reviews) {
                for (var i = 0; i < reviews.length; i++) {
                  var review = reviews[i];
                  var reviewContainer = document.createElement('div');
                  reviewContainer.className = 'review-container';

                  var reviewAuthor = document.createElement('div');
                  reviewAuthor.className = 'review-author';
                  reviewAuthor.innerHTML = '<img src="' + review.profile_photo_url + '" alt="Author Photo"><span>' + review.author_name + '</span><span class="review-rating">' + getStarRating(review.rating) + '</span>';
                  reviewContainer.appendChild(reviewAuthor);

                  var reviewText = document.createElement('div');
                  reviewText.className = 'review-text';
                  reviewText.innerHTML = review.text;
                  reviewContainer.appendChild(reviewText);

                  var reviewToggle = document.createElement('span');
                  reviewToggle.className = 'review-more';
                  reviewToggle.innerHTML = '... Read More';
                  reviewToggle.addEventListener('click', function() {
                    if (reviewText.classList.contains('review-expanded')) {
                      reviewText.classList.remove('review-expanded');
                      reviewToggle.innerHTML = '... Read More';
                    } else {
                      reviewText.classList.add('review-expanded');
                      reviewToggle.innerHTML = '... Read Less';
                    }
                  });
                  reviewContainer.appendChild(reviewToggle);

                  // document.body.appendChild(reviewContainer);
                  document.getElementById('reviews-container').appendChild(reviewContainer);
                }
              } else {
                var noReviewsElement = document.createElement('div');
                noReviewsElement.innerHTML = 'No reviews found.';
                document.body.appendChild(noReviewsElement);
              }
            }
          }
        );
      }

      function getStarRating(rating) {
        var stars = '';
        for (var i = 0; i < rating; i++) {
          stars += '&#9733;'; // зірочка (знак UTF-8)
        }
        return stars;
      }

      google.maps.event.addDomListener(window, 'load', initMap);
    </script>
  </body>
</html>
